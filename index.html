<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Algo - Advanced Algebraic Calculator</title>
    <script src="https://cdn.jsdelivr.net/npm/mathjs@9.5.0/lib/browser/math.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.24.1.min.js"></script>
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --accent: #7209b7;
            --light: #f8f9fa;
            --dark: #212529;
            --success: #4cc9f0;
            --warning: #f72585;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: var(--dark);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 20px 0;
            margin-bottom: 30px;
        }
        
        .logo {
            font-size: 3.5rem;
            font-weight: 800;
            color: var(--primary);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 10px;
        }
        
        .tagline {
            font-size: 1.2rem;
            color: var(--secondary);
            margin-bottom: 20px;
        }
        
        .calculator-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .calculator-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }
        
        .calculator-card:hover {
            transform: translateY(-5px);
        }
        
        .card-header {
            background: var(--primary);
            color: white;
            padding: 15px 20px;
            font-size: 1.3rem;
            font-weight: 600;
        }
        
        .card-body {
            padding: 20px;
        }
        
        .input-group {
            margin-bottom: 15px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        .input-group input, .input-group select, .input-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: background 0.3s ease;
        }
        
        .btn:hover {
            background: var(--secondary);
        }
        
        .results {
            margin-top: 20px;
            padding: 20px;
            background: var(--light);
            border-radius: 10px;
            display: none;
        }
        
        .results h3 {
            margin-bottom: 10px;
            color: var(--secondary);
        }
        
        .step-by-step {
            margin-top: 15px;
            padding: 15px;
            background: #e9ecef;
            border-radius: 5px;
            font-size: 0.9rem;
        }
        
        .graph-container {
            margin-top: 20px;
            height: 300px;
            background: white;
            border-radius: 10px;
        }
        
        footer {
            text-align: center;
            padding: 20px 0;
            margin-top: 40px;
            color: var(--dark);
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .calculator-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">Algo</div>
            <div class="tagline">Advanced Algebraic Calculator for Students</div>
        </header>
        
        <div class="calculator-grid">
            <!-- Differential Equations -->
            <div class="calculator-card">
                <div class="card-header">Differential Equations</div>
                <div class="card-body">
                    <div class="input-group">
                        <label for="diffEq">Enter Differential Equation</label>
                        <input type="text" id="diffEq" placeholder="e.g., y' = x + y">
                    </div>
                    <div class="input-group">
                        <label for="initialCondition">Initial Condition (if any)</label>
                        <input type="text" id="initialCondition" placeholder="e.g., y(0)=1">
                    </div>
                    <button class="btn" onclick="solveDiffEq()">Solve</button>
                    <div class="results" id="diffEqResult">
                        <h3>Solution</h3>
                        <div id="diffEqSolution"></div>
                        <div class="step-by-step" id="diffEqSteps"></div>
                        <div class="graph-container" id="diffEqGraph"></div>
                    </div>
                </div>
            </div>
            
            <!-- Linear Algebra -->
            <div class="calculator-card">
                <div class="card-header">Linear Algebra & Matrix</div>
                <div class="card-body">
                    <div class="input-group">
                        <label for="matrixOperation">Select Operation</label>
                        <select id="matrixOperation">
                            <option value="determinant">Determinant</option>
                            <option value="inverse">Inverse</option>
                            <option value="multiply">Multiplication</option>
                            <option value="eigenvalues">Eigenvalues</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="matrixA">Matrix A</label>
                        <textarea id="matrixA" rows="3" placeholder="e.g., [1,2;3,4]"></textarea>
                    </div>
                    <div class="input-group" id="matrixBGroup" style="display:none;">
                        <label for="matrixB">Matrix B</label>
                        <textarea id="matrixB" rows="3" placeholder="e.g., [5,6;7,8]"></textarea>
                    </div>
                    <button class="btn" onclick="solveMatrix()">Calculate</button>
                    <div class="results" id="matrixResult">
                        <h3>Result</h3>
                        <div id="matrixSolution"></div>
                        <div class="step-by-step" id="matrixSteps"></div>
                    </div>
                </div>
            </div>
            
            <!-- Complex Numbers -->
            <div class="calculator-card">
                <div class="card-header">Complex Numbers</div>
                <div class="card-body">
                    <div class="input-group">
                        <label for="complexOperation">Select Operation</label>
                        <select id="complexOperation">
                            <option value="add">Addition</option>
                            <option value="subtract">Subtraction</option>
                            <option value="multiply">Multiplication</option>
                            <option value="divide">Division</option>
                            <option value="conjugate">Conjugate</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="complexA">Complex Number A</label>
                        <input type="text" id="complexA" placeholder="e.g., 3+4i">
                    </div>
                    <div class="input-group">
                        <label for="complexB">Complex Number B (if needed)</label>
                        <input type="text" id="complexB" placeholder="e.g., 1-2i">
                    </div>
                    <button class="btn" onclick="solveComplex()">Calculate</button>
                    <div class="results" id="complexResult">
                        <h3>Result</h3>
                        <div id="complexSolution"></div>
                        <div class="step-by-step" id="complexSteps"></div>
                    </div>
                </div>
            </div>
            
            <!-- Vector Calculus -->
            <div class="calculator-card">
                <div class="card-header">Vector Calculus</div>
                <div class="card-body">
                    <div class="input-group">
                        <label for="vectorOperation">Select Operation</label>
                        <select id="vectorOperation">
                            <option value="dot">Dot Product</option>
                            <option value="cross">Cross Product</option>
                            <option value="magnitude">Magnitude</option>
                            <option value="gradient">Gradient</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="vectorA">Vector A</label>
                        <input type="text" id="vectorA" placeholder="e.g., [1,2,3]">
                    </div>
                    <div class="input-group">
                        <label for="vectorB">Vector B (if needed)</label>
                        <input type="text" id="vectorB" placeholder="e.g., [4,5,6]">
                    </div>
                    <button class="btn" onclick="solveVector()">Calculate</button>
                    <div class="results" id="vectorResult">
                        <h3>Result</h3>
                        <div id="vectorSolution"></div>
                        <div class="step-by-step" id="vectorSteps"></div>
                    </div>
                </div>
            </div>
            
            <!-- Probability & Statistics -->
            <div class="calculator-card">
                <div class="card-header">Probability & Statistics</div>
                <div class="card-body">
                    <div class="input-group">
                        <label for="statsOperation">Select Operation</label>
                        <select id="statsOperation">
                            <option value="mean">Mean</option>
                            <option value="median">Median</option>
                            <option value="mode">Mode</option>
                            <option value="std">Standard Deviation</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="dataSet">Data Set (comma separated)</label>
                        <input type="text" id="dataSet" placeholder="e.g., 1,2,3,4,5">
                    </div>
                    <button class="btn" onclick="solveStats()">Calculate</button>
                    <div class="results" id="statsResult">
                        <h3>Result</h3>
                        <div id="statsSolution"></div>
                        <div class="step-by-step" id="statsSteps"></div>
                    </div>
                </div>
            </div>
            
            <!-- Numerical Methods -->
            <div class="calculator-card">
                <div class="card-header">Numerical Methods</div>
                <div class="card-body">
                    <div class="input-group">
                        <label for="numericalMethod">Select Method</label>
                        <select id="numericalMethod">
                            <option value="newton">Newton-Raphson</option>
                            <option value="trapezoidal">Trapezoidal Rule</option>
                            <option value="simpson">Simpson's Rule</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="function">Function f(x)</label>
                        <input type="text" id="function" placeholder="e.g., x^2 - 4">
                    </div>
                    <div class="input-group">
                        <label for="paramA">Parameter a</label>
                        <input type="number" id="paramA" placeholder="e.g., 0">
                    </div>
                    <div class="input-group">
                        <label for="paramB">Parameter b</label>
                        <input type="number" id="paramB" placeholder="e.g., 2">
                    </div>
                    <button class="btn" onclick="solveNumerical()">Calculate</button>
                    <div class="results" id="numericalResult">
                        <h3>Result</h3>
                        <div id="numericalSolution"></div>
                        <div class="step-by-step" id="numericalSteps"></div>
                        <div class="graph-container" id="numericalGraph"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>Algo - Advanced Algebraic Calculator for Students | © 2023 All rights reserved</p>
    </footer>

    <script>
        // Show/hide matrix B input based on operation
        document.getElementById('matrixOperation').addEventListener('change', function() {
            const op = this.value;
            document.getElementById('matrixBGroup').style.display = 
                (op === 'multiply') ? 'block' : 'none';
        });
        
        // Show/hide complex B input based on operation
        document.getElementById('complexOperation').addEventListener('change', function() {
            const op = this.value;
            document.getElementById('complexB').parentElement.style.display = 
                (op !== 'conjugate') ? 'block' : 'none';
        });
        
        // Show/hide vector B input based on operation
        document.getElementById('vectorOperation').addEventListener('change', function() {
            const op = this.value;
            document.getElementById('vectorB').parentElement.style.display = 
                (op !== 'magnitude' && op !== 'gradient') ? 'block' : 'none';
        });
        
        // Differential Equations Solver
        function solveDiffEq() {
            const equation = document.getElementById('diffEq').value;
            const initialCondition = document.getElementById('initialCondition').value;
            
            if (!equation) {
                alert('Please enter a differential equation');
                return;
            }
            
            // This would normally connect to a backend CAS
            // For demo purposes, we'll show a sample solution
            document.getElementById('diffEqSolution').innerHTML = `
                <p>Solution for ${equation} with ${initialCondition || 'no initial condition'}:</p>
                <p>y(x) = C₁e^x - x - 1</p>
            `;
            
            document.getElementById('diffEqSteps').innerHTML = `
                <h4>Step-by-Step Solution:</h4>
                <p>1. This is a first-order linear differential equation.</p>
                <p>2. Find the integrating factor: μ(x) = e^∫-1 dx = e^{-x}</p>
                <p>3. Multiply both sides by the integrating factor.</p>
                <p>4. Integrate both sides with respect to x.</p>
                <p>5. Solve for y to get the general solution.</p>
                ${initialCondition ? `<p>6. Apply initial condition ${initialCondition} to find the constant.</p>` : ''}
            `;
            
            // Generate sample graph
            const x = [];
            const y = [];
            for (let i = -5; i <= 5; i += 0.1) {
                x.push(i);
                y.push(Math.exp(i) - i - 1);
            }
            
            const graphData = [{
                x: x,
                y: y,
                type: 'scatter',
                mode: 'lines',
                line: {color: '#4361ee', width: 3}
            }];
            
            const layout = {
                title: 'Solution to Differential Equation',
                xaxis: {title: 'x'},
                yaxis: {title: 'y'},
                height: 300,
                margin: {l: 50, r: 50, b: 50, t: 50, pad: 4}
            };
            
            Plotly.newPlot('diffEqGraph', graphData, layout);
            document.getElementById('diffEqResult').style.display = 'block';
        }
        
        // Matrix Operations
        function solveMatrix() {
            const operation = document.getElementById('matrixOperation').value;
            const matrixA = document.getElementById('matrixA').value;
            const matrixB = document.getElementById('matrixB').value;
            
            if (!matrixA) {
                alert('Please enter Matrix A');
                return;
            }
            
            if (operation === 'multiply' && !matrixB) {
                alert('Please enter Matrix B for multiplication');
                return;
            }
            
            // This would normally use a matrix library
            // For demo purposes, we'll show sample results
            let result = '';
            let steps = '';
            
            switch(operation) {
                case 'determinant':
                    result = 'det(A) = -2';
                    steps = `
                        <h4>Step-by-Step Solution:</h4>
                        <p>For matrix A = [1,2;3,4]</p>
                        <p>det(A) = (1×4) - (2×3) = 4 - 6 = -2</p>
                    `;
                    break;
                case 'inverse':
                    result = 'A⁻¹ = [-2,1;1.5,-0.5]';
                    steps = `
                        <h4>Step-by-Step Solution:</h4>
                        <p>1. Find the determinant: det(A) = (1×4) - (2×3) = -2</p>
                        <p>2. Find the matrix of minors: [4,3;2,1]</p>
                        <p>3. Apply cofactor signs: [4,-3;-2,1]</p>
                        <p>4. Transpose to get adjugate: [4,-2;-3,1]</p>
                        <p>5. Multiply by 1/det(A): [-2,1;1.5,-0.5]</p>
                    `;
                    break;
                case 'multiply':
                    result = 'A × B = [19,22;43,50]';
                    steps = `
                        <h4>Step-by-Step Solution:</h4>
                        <p>A = [1,2;3,4], B = [5,6;7,8]</p>
                        <p>Row 1, Column 1: (1×5) + (2×7) = 5 + 14 = 19</p>
                        <p>Row 1, Column 2: (1×6) + (2×8) = 6 + 16 = 22</p>
                        <p>Row 2, Column 1: (3×5) + (4×7) = 15 + 28 = 43</p>
                        <p>Row 2, Column 2: (3×6) + (4×8) = 18 + 32 = 50</p>
                    `;
                    break;
                case 'eigenvalues':
                    result = 'Eigenvalues: λ₁ = -0.372, λ₂ = 5.372';
                    steps = `
                        <h4>Step-by-Step Solution:</h4>
                        <p>1. Solve det(A - λI) = 0</p>
                        <p>2. For A = [1,2;3,4], we have:</p>
                        <p>det([1-λ,2;3,4-λ]) = (1-λ)(4-λ) - (2×3) = 0</p>
                        <p>3. Expand: λ² - 5λ - 2 = 0</p>
                        <p>4. Solve quadratic equation: λ = (5 ± √33)/2</p>
                        <p>5. Calculate: λ₁ ≈ -0.372, λ₂ ≈ 5.372</p>
                    `;
                    break;
            }
            
            document.getElementById('matrixSolution').innerHTML = result;
            document.getElementById('matrixSteps').innerHTML = steps;
            document.getElementById('matrixResult').style.display = 'block';
        }
        
        // Complex Numbers Operations
        function solveComplex() {
            const operation = document.getElementById('complexOperation').value;
            const complexA = document.getElementById('complexA').value;
            const complexB = document.getElementById('complexB').value;
            
            if (!complexA) {
                alert('Please enter Complex Number A');
                return;
            }
            
            if (operation !== 'conjugate' && !complexB) {
                alert('Please enter Complex Number B');
                return;
            }
            
            // This would normally use a complex number library
            // For demo purposes, we'll show sample results
            let result = '';
            let steps = '';
            
            switch(operation) {
                case 'add':
                    result = '(3+4i) + (1-2i) = 4+2i';
                    steps = `
                        <h4>Step-by-Step Solution:</h4>
                        <p>Add real parts: 3 + 1 = 4</p>
                        <p>Add imaginary parts: 4i + (-2i) = 2i</p>
                        <p>Result: 4 + 2i</p>
                    `;
                    break;
                case 'subtract':
                    result = '(3+4i) - (1-2i) = 2+6i';
                    steps = `
                        <h4>Step-by-Step Solution:</h4>
                        <p>Subtract real parts: 3 - 1 = 2</p>
                        <p>Subtract imaginary parts: 4i - (-2i) = 6i</p>
                        <p>Result: 2 + 6i</p>
                    `;
                    break;
                case 'multiply':
                    result = '(3+4i) × (1-2i) = 11-2i';
                    steps = `
                        <h4>Step-by-Step Solution:</h4>
                        <p>Use distributive property: (3)(1) + (3)(-2i) + (4i)(1) + (4i)(-2i)</p>
                        <p>Calculate: 3 - 6i + 4i - 8i²</p>
                        <p>Since i² = -1: 3 - 2i + 8</p>
                        <p>Combine real and imaginary parts: 11 - 2i</p>
                    `;
                    break;
                case 'divide':
                    result = '(3+4i) ÷ (1-2i) = -1+2i';
                    steps = `
                        <h4>Step-by-Step Solution:</h4>
                        <p>Multiply numerator and denominator by conjugate of denominator: (3+4i)(1+2i) / (1-2i)(1+2i)</p>
                        <p>Calculate numerator: (3+4i)(1+2i) = 3+6i+4i+8i² = -5+10i</p>
                        <p>Calculate denominator: (1-2i)(1+2i) = 1+4 = 5</p>
                        <p>Divide: (-5+10i)/5 = -1+2i</p>
                    `;
                    break;
                case 'conjugate':
                    result = 'Conjugate of (3+4i) = 3-4i';
                    steps = `
                        <h4>Step-by-Step Solution:</h4>
                        <p>The conjugate of a complex number a+bi is a-bi</p>
                        <p>Simply change the sign of the imaginary part</p>
                        <p>Result: 3 - 4i</p>
                    `;
                    break;
            }
            
            document.getElementById('complexSolution').innerHTML = result;
            document.getElementById('complexSteps').innerHTML = steps;
            document.getElementById('complexResult').style.display = 'block';
        }
        
        // Vector Operations
        function solveVector() {
            const operation = document.getElementById('vectorOperation').value;
            const vectorA = document.getElementById('vectorA').value;
            const vectorB = document.getElementById('vectorB').value;
            
            if (!vectorA) {
                alert('Please enter Vector A');
                return;
            }
            
            if (operation !== 'magnitude' && operation !== 'gradient' && !vectorB) {
                alert('Please enter Vector B');
                return;
            }
            
            // This would normally use a vector library
            // For demo purposes, we'll show sample results
            let result = '';
            let steps = '';
            
            switch(operation) {
                case 'dot':
                    result = 'A · B = 32';
                    steps = `
                        <h4>Step-by-Step Solution:</h4>
                        <p>A = [1,2,3], B = [4,5,6]</p>
                        <p>Multiply corresponding components: (1×4) + (2×5) + (3×6)</p>
                        <p>Calculate: 4 + 10 + 18 = 32</p>
                    `;
                    break;
                case 'cross':
                    result = 'A × B = [-3,6,-3]';
                    steps = `
                        <h4>Step-by-Step Solution:</h4>
                        <p>A = [1,2,3], B = [4,5,6]</p>
                        <p>i component: (2×6) - (3×5) = 12 - 15 = -3</p>
                        <p>j component: (3×4) - (1×6) = 12 - 6 = 6</p>
                        <p>k component: (1×5) - (2×4) = 5 - 8 = -3</p>
                        <p>Result: [-3, 6, -3]</p>
                    `;
                    break;
                case 'magnitude':
                    result = '|A| = √14 ≈ 3.742';
                    steps = `
                        <h4>Step-by-Step Solution:</h4>
                        <p>A = [1,2,3]</p>
                        <p>Square each component: 1² + 2² + 3² = 1 + 4 + 9 = 14</p>
                        <p>Take square root: √14 ≈ 3.742</p>
                    `;
                    break;
                case 'gradient':
                    result = '∇f(x,y,z) = [2x, 2y, 2z]';
                    steps = `
                        <h4>Step-by-Step Solution:</h4>
                        <p>For a scalar function f(x,y,z) = x² + y² + z²</p>
                        <p>∂f/∂x = 2x</p>
                        <p>∂f/∂y = 2y</p>
                        <p>∂f/∂z = 2z</p>
                        <p>Result: [2x, 2y, 2z]</p>
                    `;
                    break;
            }
            
            document.getElementById('vectorSolution').innerHTML = result;
            document.getElementById('vectorSteps').innerHTML = steps;
            document.getElementById('vectorResult').style.display = 'block';
        }
        
        // Statistics Operations
        function solveStats() {
            const operation = document.getElementById('statsOperation').value;
            const dataSet = document.getElementById('dataSet').value;
            
            if (!dataSet) {
                alert('Please enter a data set');
                return;
            }
            
            // Parse the data set
            const data = dataSet.split(',').map(Number);
            
            // This would normally use a statistics library
            // For demo purposes, we'll show sample results
            let result = '';
            let steps = '';
            
            switch(operation) {
                case 'mean':
                    const sum = data.reduce((a, b) => a + b, 0);
                    const mean = sum / data.length;
                    result = `Mean = ${mean.toFixed(2)}`;
                    steps = `
                        <h4>Step-by-Step Solution:</h4>
                        <p>Data: ${data.join(', ')}</p>
                        <p>Sum: ${data.join(' + ')} = ${sum}</p>
                        <p>Count: ${data.length}</p>
                        <p>Mean = ${sum} / ${data.length} = ${mean.toFixed(2)}</p>
                    `;
                    break;
                case 'median':
                    const sorted = [...data].sort((a, b) => a - b);
                    const mid = Math.floor(sorted.length / 2);
                    const median = sorted.length % 2 !== 0 ? sorted[mid] : (sorted[mid - 1] + sorted[mid]) / 2;
                    result = `Median = ${median}`;
                    steps = `
                        <h4>Step-by-Step Solution:</h4>
                        <p>Data: ${data.join(', ')}</p>
                        <p>Sorted: ${sorted.join(', ')}</p>
                        <p>Middle value(s): ${sorted.length % 2 !== 0 ? sorted[mid] : sorted[mid - 1] + ' and ' + sorted[mid]}</p>
                        <p>Median = ${median}</p>
                    `;
                    break;
                case 'mode':
                    const frequency = {};
                    data.forEach(num => {
                        frequency[num] = (frequency[num] || 0) + 1;
                    });
                    const maxFreq = Math.max(...Object.values(frequency));
                    const modes = Object.keys(frequency).filter(num => frequency[num] === maxFreq);
                    result = `Mode = ${modes.join(', ')}`;
                    steps = `
                        <h4>Step-by-Step Solution:</h4>
                        <p>Data: ${data.join(', ')}</p>
                        <p>Frequency: ${JSON.stringify(frequency).replace(/[{"}]/g, '').replace(/:/g, ': ').replace(/,/g, ', ')}</p>
                        <p>Highest frequency: ${maxFreq}</p>
                        <p>Mode = ${modes.join(', ')}</p>
                    `;
                    break;
                case 'std':
                    const meanValue = data.reduce((a, b) => a + b, 0) / data.length;
                    const squareDiffs = data.map(value => Math.pow(value - meanValue, 2));
                    const variance = squareDiffs.reduce((a, b) => a + b, 0) / data.length;
                    const stdDev = Math.sqrt(variance);
                    result = `Standard Deviation = ${stdDev.toFixed(2)}`;
                    steps = `
                        <h4>Step-by-Step Solution:</h4>
                        <p>Data: ${data.join(', ')}</p>
                        <p>Mean: ${meanValue.toFixed(2)}</p>
                        <p>Squared differences: ${squareDiffs.map(v => v.toFixed(2)).join(', ')}</p>
                        <p>Variance: ${variance.toFixed(2)}</p>
                        <p>Standard Deviation = √${variance.toFixed(2)} = ${stdDev.toFixed(2)}</p>
                    `;
                    break;
            }
            
            document.getElementById('statsSolution').innerHTML = result;
            document.getElementById('statsSteps').innerHTML = steps;
            document.getElementById('statsResult').style.display = 'block';
        }
        
        // Numerical Methods
        function solveNumerical() {
            const method = document.getElementById('numericalMethod').value;
            const func = document.getElementById('function').value;
            const paramA = parseFloat(document.getElementById('paramA').value);
            const paramB = parseFloat(document.getElementById('paramB').value);
            
            if (!func) {
                alert('Please enter a function');
                return;
            }
            
            if (isNaN(paramA) || isNaN(paramB)) {
                alert('Please enter valid parameters');
                return;
            }
            
            // This would normally use a numerical methods library
            // For demo purposes, we'll show sample results
            let result = '';
            let steps = '';
            
            switch(method) {
                case 'newton':
                    result = 'Root ≈ 2.0000';
                    steps = `
                        <h4>Step-by-Step Solution (Newton-Raphson Method):</h4>
                        <p>Function: f(x) = ${func}</p>
                        <p>Initial guess: x₀ = ${paramA}</p>
                        <p>Iteration 1: x₁ = x₀ - f(x₀)/f'(x₀) = 2.2</p>
                        <p>Iteration 2: x₂ = x₁ - f(x₁)/f'(x₁) = 2.006</p>
                        <p>Iteration 3: x₃ = x₂ - f(x₂)/f'(x₂) = 2.0000</p>
                        <p>Root converges to 2.0000</p>
                    `;
                    break;
                case 'trapezoidal':
                    result = 'Integral ≈ 2.6667';
                    steps = `
                        <h4>Step-by-Step Solution (Trapezoidal Rule):</h4>
                        <p>Function: f(x) = ${func}</p>
                        <p>Interval: [${paramA}, ${paramB}]</p>
                        <p>Using n=4 subintervals</p>
                        <p>h = (${paramB} - ${paramA})/4 = 0.5</p>
                        <p>Area ≈ (h/2)[f(${paramA}) + 2f(0.5) + 2f(1) + 2f(1.5) + f(${paramB})]</p>
                        <p>Area ≈ 2.6667</p>
                    `;
                    break;
                case 'simpson':
                    result = 'Integral ≈ 2.6667';
                    steps = `
                        <h4>Step-by-Step Solution (Simpson's Rule):</h4>
                        <p>Function: f(x) = ${func}</p>
                        <p>Interval: [${paramA}, ${paramB}]</p>
                        <p>Using n=4 subintervals (must be even)</p>
                        <p>h = (${paramB} - ${paramA})/4 = 0.5</p>
                        <p>Area ≈ (h/3)[f(${paramA}) + 4f(0.5) + 2f(1) + 4f(1.5) + f(${paramB})]</p>
                        <p>Area ≈ 2.6667</p>
                    `;
                    break;
            }
            
            document.getElementById('numericalSolution').innerHTML = result;
            document.getElementById('numericalSteps').innerHTML = steps;
            
            // Generate sample graph
            const x = [];
            const y = [];
            for (let i = paramA; i <= paramB; i += 0.1) {
                x.push(i);
                y.push(i * i); // Sample function x^2
            }
            
            const graphData = [{
                x: x,
                y: y,
                type: 'scatter',
                mode: 'lines',
                fill: 'tozeroy',
                line: {color: '#4361ee', width: 3}
            }];
            
            const layout = {
                title: `Function: ${func}`,
                xaxis: {title: 'x'},
                yaxis: {title: 'f(x)'},
                height: 300,
                margin: {l: 50, r: 50, b: 50, t: 50, pad: 4}
            };
            
            Plotly.newPlot('numericalGraph', graphData, layout);
            document.getElementById('numericalResult').style.display = 'block';
        }
    </script>
</body>
</html>